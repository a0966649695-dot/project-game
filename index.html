<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <title>è¨˜æ†¶ç¿»ç‰ŒéŠæˆ²</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background: #f7f7f7;
    }
    button {
      padding: 8px 14px;
      margin: 10px;
      border: none;
      border-radius: 6px;
      background: #4CAF50;
      color: #fff;
      cursor: pointer;
    }
    button:hover {
      background: #45a049;
    }
    #game {
      margin-top: 16px;
    }
    .card {
      width: 80px;
      height: 80px;
      margin: 10px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      background: #fff;
      border-radius: 10px;
      font-size: 36px;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,.2);
      transition: transform .2s;
      user-select: none;
    }
    .card:hover {
      transform: scale(1.05);
    }
  </style>
</head>
<body>

  <h1>è¨˜æ†¶ç¿»ç‰ŒéŠæˆ²</h1>
  <p>è«‹å…ˆé¸æ“‡é›£åº¦é–‹å§‹éŠæˆ²</p>

  <div>
    <button onclick="setEasy()">ç°¡å–®æ¨¡å¼</button>
    <button onclick="setHard()">å›°é›£æ¨¡å¼</button>
  </div>

  <p>
    æ™‚é–“ï¼š<span id="time">0</span> ç§’ ï½œ 
    ç¿»ç‰Œæ¬¡æ•¸ï¼š<span id="moves">0</span>
  </p>

  <div id="game"></div>

  <script>
    // ====== éŠæˆ²ç‹€æ…‹ ======
    let cards = [];
    const easyCards = ['ğŸ','ğŸ','ğŸŒ','ğŸŒ','ğŸ‡','ğŸ‡'];
    const hardCards = ['ğŸ','ğŸ','ğŸŒ','ğŸŒ','ğŸ‡','ğŸ‡','ğŸ‰','ğŸ‰','ğŸ“','ğŸ“'];

    let flipped = [];
    let moves = 0;

    let time = 0;
    let timerId = null;
    let isFinished = false;

    function $(id) {
      return document.getElementById(id);
    }

    function shuffle(arr) {
      return [...arr].sort(() => 0.5 - Math.random());
    }

    // ====== å»ºç«‹éŠæˆ² ======
    function createGame() {
      const game = $('game');
      game.innerHTML = '';

      shuffle(cards).forEach(symbol => {
        const card = document.createElement('div');
        card.className = 'card';
        card.innerText = '?';
        card.onclick = () => flip(card, symbol);
        game.appendChild(card);
      });
    }

    // ====== é–‹å§‹éŠæˆ²ï¼ˆåªæœƒåœ¨é¸æ¨¡å¼æ™‚å‘¼å«ï¼‰ ======
    function startGame() {
      isFinished = false;
      flipped = [];
      moves = 0;
      $('moves').innerText = moves;

      // âš ï¸ é—œæ‰èˆŠçš„è¨ˆæ™‚å™¨ï¼ˆé¿å…é‡è¤‡ï¼‰
      if (timerId) clearInterval(timerId);

      time = 0;
      $('time').innerText = time;

      timerId = setInterval(() => {
        time++;
        $('time').innerText = time;
      }, 1000);

      createGame();
    }

    function flip(card, symbol) {
      if (isFinished) return;
      if (card.innerText !== '?' || flipped.length >= 2) return;

      card.innerText = symbol;
      flipped.push({ card, symbol });

      moves++;
      $('moves').innerText = moves;

      if (flipped.length === 2) {
        const [a, b] = flipped;

        if (a.symbol !== b.symbol) {
          setTimeout(() => {
            a.card.innerText = '?';
            b.card.innerText = '?';
            flipped = [];
          }, 800);
        } else {
          flipped = [];
          checkWin();
        }
      }
    }

    // ====== å®Œæˆæª¢æŸ¥ ======
    function checkWin() {
      const allCards = document.querySelectorAll('.card');
      const finished = [...allCards].every(c => c.innerText !== '?');

      if (finished) {
        isFinished = true;
        clearInterval(timerId); // âœ… å®Œæˆå°±åœè¡¨
        alert(`å®Œæˆï¼ç”¨æ™‚ ${time} ç§’ï¼Œç¿»ç‰Œ ${moves} æ¬¡`);
      }
    }

    // ====== é›£åº¦ ======
    function setEasy() {
      cards = easyCards;
      startGame();
    }

    function setHard() {
      cards = hardCards;
      startGame();
    }

    // âŒ æ³¨æ„ï¼šé€™è£¡ã€Œæ²’æœ‰ã€è‡ªå‹• startGame()
    // åªæœ‰æŒ‰æŒ‰éˆ•æ‰æœƒé–‹å§‹è¨ˆæ™‚
  </script>
</body>
</html>
